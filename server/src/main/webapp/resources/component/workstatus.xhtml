<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:composite="http://java.sun.com/jsf/composite"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html">

  <composite:interface>
    <composite:attribute name="jobStatus" type="org.zanata.helper.model.JobStatus"
      shortDescription="status for the job" required="true"/>

    <composite:attribute name="type" type="java.lang.String"
      shortDescription="type of job. 'REPO_SYNC' or 'SERVER_SYNC'" required="true" />

    <composite:attribute name="styleClass" type="java.lang.String"
      shortDescription="styleClass for component"/>
  </composite:interface>

  <composite:implementation>
    <ui:param name="title" value="#{msg.format('jsf.job.status.title', cc.attrs.jobStatus.status.name())}"/>
    <ui:param name="statusClass" value="txt--neutral"/>

    <ui:fragment rendered="#{cc.attrs.jobStatus.status.name() eq 'RUNNING'}">
      <ui:param name="statusClass" value="txt--unsure"/>
    </ui:fragment>
    <ui:fragment rendered="#{cc.attrs.jobStatus.status.name() eq 'ERROR'}">
      <ui:param name="statusClass" value="txt--danger"/>
    </ui:fragment>
    <ui:fragment rendered="#{cc.attrs.jobStatus.status.name() eq 'COMPLETE'}">
      <ui:param name="statusClass" value="txt--success"/>
    </ui:fragment>
    <ui:fragment rendered="#{cc.attrs.jobStatus.status.name() eq 'PAUSE'}">
      <ui:param name="statusClass" value="txt--neutral"/>
    </ui:fragment>
    <ui:fragment rendered="#{cc.attrs.jobStatus.status.name() eq 'NORMAL'}">
      <ui:param name="statusClass" value=""/>
    </ui:fragment>
    <ui:fragment rendered="#{cc.attrs.jobStatus eq null}">
      <ui:param name="title" value="#{msg.format('jsf.job.status.title', 'none')}"/>
      <ui:param name="statusClass" value="txt--neutral"/>
    </ui:fragment>

    <div title="#{title}" class="#{statusClass} #{cc.attrs.styleClass}">
      <h:panelGroup styleClass="txt--meta bx--inline-block" rendered="#{cc.attrs.type eq 'REPO_SYNC'}">
        #{msg['jsf.newWork.syncToRepo.title']}
      </h:panelGroup>
      <h:panelGroup styleClass="txt--meta bx--inline-block" rendered="#{cc.attrs.type eq 'SERVER_SYNC'}">
        #{msg['jsf.newWork.syncToServer.title']}
      </h:panelGroup>
      <span class="txt--meta l--push-left-quarter bx--inline-block">
        <i class="i i--clock"></i> <span>#{cc.attrs.jobStatus.lastEndTime}</span>
      </span>
    </div>
  </composite:implementation>
</html>